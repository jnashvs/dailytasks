{"remainingRequest":"/Users/jorgevarela/Documents/dailytasks/node_modules/babel-loader/lib/index.js!/Users/jorgevarela/Documents/dailytasks/node_modules/eslint-loader/index.js??ref--13-0!/Users/jorgevarela/Documents/dailytasks/src/router/index.js","dependencies":[{"path":"/Users/jorgevarela/Documents/dailytasks/src/router/index.js","mtime":1608161089759},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/cache-loader/dist/cjs.js","mtime":1607791222437},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/babel-loader/lib/index.js","mtime":1607791221765},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/eslint-loader/index.js","mtime":1607791229555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IFRvZG9MaXN0IGZyb20gJy4uL3ZpZXdzL1RvZG9MaXN0LnZ1ZSc7CmltcG9ydCBSZWdpc3RlciBmcm9tICcuLi9jb21wb25lbnRzL2F1dGgvUmVnaXN0ZXIudnVlJzsKaW1wb3J0IExvZ2luIGZyb20gJy4uL2NvbXBvbmVudHMvYXV0aC9Mb2dpbi52dWUnOwppbXBvcnQgSGVsbG8gZnJvbSAnLi4vY29tcG9uZW50cy9IZWxsb1dvcmxkLnZ1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7IC8vaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlL2luZGV4LmpzJwovL2NvbnNvbGUubG9nKCdkZW50cm8gcm91dGVyJykKClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy9oZWxsbycsCiAgbmFtZTogJ0hlbGxvJywKICBjb21wb25lbnQ6IEhlbGxvLAogIG1ldGE6IHsKICAgIHJlcXVpcmVzQXV0aDogdHJ1ZQogIH0sCiAgYmVmb3JlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICBndWFyZCh0bywgZnJvbSwgbmV4dCk7CiAgfQp9LCB7CiAgcGF0aDogJy8nLAogIG5hbWU6ICdUb2RvTGlzdCcsCiAgY29tcG9uZW50OiBUb2RvTGlzdCwKICBtZXRhOiB7CiAgICByZXF1aXJlc0F1dGg6IHRydWUKICB9LAogIGJlZm9yZUVudGVyOiBmdW5jdGlvbiBiZWZvcmVFbnRlcih0bywgZnJvbSwgbmV4dCkgewogICAgZ3VhcmQodG8sIGZyb20sIG5leHQpOwogIH0KfSwgewogIHBhdGg6ICcvbG9naW4nLAogIG5hbWU6ICdMb2dpbicsCiAgY29tcG9uZW50OiBMb2dpbiwKICBtZXRhOiB7CiAgICByZXF1aXJlc1Zpc2l0b3I6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAnL3JlZ2lzdGVyJywKICBuYW1lOiAnUmVnaXN0ZXInLAogIGNvbXBvbmVudDogUmVnaXN0ZXIKfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAnaGlzdG9yeScsCiAgYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgcm91dGVzOiByb3V0ZXMKfSk7IC8vCgp2YXIgZ3VhcmQgPSBmdW5jdGlvbiBndWFyZCh0bywgZnJvbSwgbmV4dCkgewogIC8vIGNoZWNrIGZvciB2YWxpZCBhdXRoIHRva2VuCiAgYXhpb3MuZ2V0KCcvaXN2YWxpZHRva2VuJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIC8vIFRva2VuIGlzIHZhbGlkLCBzbyBjb250aW51ZQogICAgaWYgKHJlc3BvbnNlLmRhdGEudmFsaWQpIHsKICAgICAgbmV4dCgpOwogICAgfSBlbHNlIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICB9CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igc28gcmVkaXJlY3QKICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi9sb2dpbiI7CiAgfSk7Cn07IC8vCgoKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgdmFyIGlzQXV0aGVudGljYXRlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpIHx8ICcnOwoKICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHJldHVybiByZWNvcmQubWV0YS5yZXF1aXJlc0F1dGg7CiAgfSkpIHsKICAgIGlmICghaXNBdXRoZW50aWNhdGVkKSB7CiAgICAgIG5leHQoewogICAgICAgIG5hbWU6ICdMb2dpbicKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KCk7CiAgICB9CiAgfQoKICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHJldHVybiByZWNvcmQubWV0YS5yZXF1aXJlc1Zpc2l0b3I7CiAgfSkpIHsKICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgbmV4dCh7CiAgICAgICAgbmFtZTogJ1RvZG9MaXN0JwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoKTsKICAgIH0KICB9IGVsc2UgewogICAgbmV4dCgpOwogIH0KfSk7IC8vIHJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSwgbmV4dCkgPT4gewovLyAgIGlmICh0by5uYW1lICE9PSAnTG9naW4nICYmICFpc0F1dGhlbnRpY2F0ZWQpIG5leHQoeyBuYW1lOiAnTG9naW4nIH0pCi8vICAgZWxzZSBuZXh0KCkKLy8gfSkKCmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["/Users/jorgevarela/Documents/dailytasks/src/router/index.js"],"names":["Vue","VueRouter","TodoList","Register","Login","Hello","axios","use","routes","path","name","component","meta","requiresAuth","beforeEnter","to","from","next","guard","requiresVisitor","router","mode","base","process","env","BASE_URL","get","then","response","data","valid","localStorage","removeItem","catch","error","console","log","window","location","href","beforeEach","isAuthenticated","getItem","matched","some","record"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport TodoList from '../views/TodoList.vue'\nimport Register from '../components/auth/Register.vue'\nimport Login from '../components/auth/Login.vue'\nimport Hello from '../components/HelloWorld.vue'\nimport axios from 'axios'\n//import store from '../store/index.js'\n\n//console.log('dentro router')\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/hello',\n    name: 'Hello',\n    component: Hello,\n    meta:{\n      requiresAuth: true\n    },\n    beforeEnter: (to, from, next) => {\n      guard(to, from, next);\n    }\n  },\n  {\n    path: '/',\n    name: 'TodoList',\n    component: TodoList,\n    meta:{\n      requiresAuth: true\n    },\n    beforeEnter: (to, from, next) => {\n      guard(to, from, next);\n    }\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login,\n    meta:{\n      requiresVisitor: true\n    }\n  },\n  {\n    path: '/register',\n    name: 'Register',\n    component: Register\n  },\n  \n]\n\n\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n//\nconst guard = function(to, from, next) {\n  // check for valid auth token\n  axios.get('/isvalidtoken').then(response => {\n      // Token is valid, so continue\n      if(response.data.valid){\n        next();\n      }else{\n        localStorage.removeItem('token')\n      }\n      \n  }).catch(error => {\n      // There was an error so redirect\n      console.log(error)\n      window.location.href = \"/login\";\n  })\n};\n\n//\nrouter.beforeEach((to, from, next) => {\n  let isAuthenticated = localStorage.getItem('token') || '';\n\n  if(to.matched.some(record => record.meta.requiresAuth)) {\n    \n    if (!isAuthenticated) {\n      next({name: 'Login'})\n    }else{\n      next()\n    }\n    \n  }\n  \n  if(to.matched.some(record => record.meta.requiresVisitor)) {\n    \n    if (isAuthenticated) {\n      next({name: 'TodoList'})\n    }else {\n      next()\n    }\n\n  } else {\n    next()\n  }\n  \n\n})\n\n// router.beforeEach((to, from, next) => {\n//   if (to.name !== 'Login' && !isAuthenticated) next({ name: 'Login' })\n//   else next()\n// })\n\nexport default router\n"]}]}