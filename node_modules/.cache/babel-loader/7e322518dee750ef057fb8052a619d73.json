{"remainingRequest":"/Users/jorgevarela/Documents/dailytasks/node_modules/babel-loader/lib/index.js!/Users/jorgevarela/Documents/dailytasks/node_modules/eslint-loader/index.js??ref--13-0!/Users/jorgevarela/Documents/dailytasks/src/store/modules/auth.js","dependencies":[{"path":"/Users/jorgevarela/Documents/dailytasks/src/store/modules/auth.js","mtime":1608071989072},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/cache-loader/dist/cjs.js","mtime":1607791222437},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/babel-loader/lib/index.js","mtime":1607791221765},{"path":"/Users/jorgevarela/Documents/dailytasks/node_modules/eslint-loader/index.js","mtime":1607791229555}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgdmFyIGF1dGggPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgc3RhdHVzOiAnJywKICAgIHJlZ2lzdGVyX3N0YXR1czogJycsCiAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgfHwgJycsCiAgICB1c2VyOiB7fQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzYXZlVG9rZW46IGZ1bmN0aW9uIHNhdmVUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBhdXRoX3JlcXVlc3Q6IGZ1bmN0aW9uIGF1dGhfcmVxdWVzdChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnbG9hZGluZyc7CiAgICB9LAogICAgYXV0aF9zdWNjZXNzOiBmdW5jdGlvbiBhdXRoX3N1Y2Nlc3Moc3RhdGUsIHRva2VuLCB1c2VyKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdzdWNjZXNzJzsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9LAogICAgcmVnaXN0ZXJfc3RhdHVzOiBmdW5jdGlvbiByZWdpc3Rlcl9zdGF0dXMoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLnJlZ2lzdGVyX3N0YXR1cyA9IHZhbHVlOwogICAgfSwKICAgIGF1dGhfZXJyb3I6IGZ1bmN0aW9uIGF1dGhfZXJyb3Ioc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ2Vycm9yJzsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAnJzsKICAgICAgc3RhdGUudG9rZW4gPSAnJzsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBkYXRhKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBheGlvcy5wb3N0KCcvbG9naW4nLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgdmFyIHRva2VuID0gcmVzcG9uc2UuZGF0YS50b2tlbjsKICAgICAgICAgIHZhciB1c2VyID0gcmVzcG9uc2UuZGF0YS51c2VyOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOwogICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHRva2VuOwogICAgICAgICAgY29tbWl0KCdhdXRoX3N1Y2Nlc3MnLCB0b2tlbiwgdXNlcik7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9lcnJvcicpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoX3JlZjIsIGRhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBheGlvcy5wb3N0KCcvcmVnaXN0ZXInLCB7CiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsCiAgICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciBzdGF0dXMgPSAnZXJyb3InOwogICAgICAgICAgY29tbWl0KCdyZWdpc3Rlcl9zdGF0dXMnLCBzdGF0dXMpOwogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICB2YXIgc3RhdHVzID0gJ2Vycm9yJzsKICAgICAgICAgIGNvbW1pdCgncmVnaXN0ZXJfc3RhdHVzJywgc3RhdHVzKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgICByZXR1cm4gISFzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBhdXRoU3RhdHVzOiBmdW5jdGlvbiBhdXRoU3RhdHVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0dXM7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/jorgevarela/Documents/dailytasks/src/store/modules/auth.js"],"names":["axios","auth","namespaced","state","status","register_status","token","localStorage","getItem","user","mutations","saveToken","auth_request","auth_success","value","auth_error","logout","actions","login","data","commit","Promise","resolve","reject","post","then","response","setItem","defaults","headers","common","catch","error","removeItem","register","name","email","password","getters","isAuthenticated","authStatus"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,IAAMC,IAAI,GAAG;AAChBC,EAAAA,UAAU,EAAE,IADI;AAEhBC,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAE,EADL;AAEHC,IAAAA,eAAe,EAAE,EAFd;AAGHC,IAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,EAHrC;AAIHC,IAAAA,IAAI,EAAE;AAJH,GAFS;AAShBC,EAAAA,SAAS,EAAE;AACPC,IAAAA,SADO,qBACGR,KADH,EACUG,KADV,EACiB;AACpBH,MAAAA,KAAK,CAACG,KAAN,GAAcA,KAAd;AACH,KAHM;AAIPM,IAAAA,YAJO,wBAIMT,KAJN,EAIa;AAChBA,MAAAA,KAAK,CAACC,MAAN,GAAe,SAAf;AACH,KANM;AAOPS,IAAAA,YAPO,wBAOMV,KAPN,EAOaG,KAPb,EAOoBG,IAPpB,EAO0B;AAC7BN,MAAAA,KAAK,CAACC,MAAN,GAAe,SAAf;AACAD,MAAAA,KAAK,CAACG,KAAN,GAAcA,KAAd;AACAH,MAAAA,KAAK,CAACM,IAAN,GAAaA,IAAb;AACH,KAXM;AAYPJ,IAAAA,eAZO,2BAYSF,KAZT,EAYgBW,KAZhB,EAYuB;AAC1BX,MAAAA,KAAK,CAACE,eAAN,GAAwBS,KAAxB;AACH,KAdM;AAePC,IAAAA,UAfO,sBAeIZ,KAfJ,EAeW;AACdA,MAAAA,KAAK,CAACC,MAAN,GAAe,OAAf;AACH,KAjBM;AAkBPY,IAAAA,MAlBO,kBAkBAb,KAlBA,EAkBO;AACVA,MAAAA,KAAK,CAACC,MAAN,GAAe,EAAf;AACAD,MAAAA,KAAK,CAACG,KAAN,GAAc,EAAd;AACH;AArBM,GATK;AAiChBW,EAAAA,OAAO,EAAE;AACLC,IAAAA,KADK,uBACaC,IADb,EACmB;AAAA,UAAhBC,MAAgB,QAAhBA,MAAgB;AAEpB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCvB,QAAAA,KAAK,CAACwB,IAAN,CAAW,QAAX,EAAqBL,IAArB,EACKM,IADL,CACU,UAAAC,QAAQ,EAAI;AACd,cAAMpB,KAAK,GAAGoB,QAAQ,CAACP,IAAT,CAAcb,KAA5B;AACA,cAAMG,IAAI,GAAGiB,QAAQ,CAACP,IAAT,CAAcV,IAA3B;AACAF,UAAAA,YAAY,CAACoB,OAAb,CAAqB,OAArB,EAA8BrB,KAA9B;AACAN,UAAAA,KAAK,CAAC4B,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDxB,KAAjD;AACAc,UAAAA,MAAM,CAAC,cAAD,EAAiBd,KAAjB,EAAwBG,IAAxB,CAAN;AACAa,UAAAA,OAAO,CAACI,QAAD,CAAP;AACH,SARL,EASKK,KATL,CASW,UAAAC,KAAK,EAAI;AACZZ,UAAAA,MAAM,CAAC,YAAD,CAAN;AACAb,UAAAA,YAAY,CAAC0B,UAAb,CAAwB,OAAxB;AACAV,UAAAA,MAAM,CAACS,KAAD,CAAN;AACH,SAbL;AAcH,OAfM,CAAP;AAgBH,KAnBI;AAoBLE,IAAAA,QApBK,2BAoBcf,IApBd,EAoBoB;AAAA,UAAfC,MAAe,SAAfA,MAAe;AACrB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCvB,QAAAA,KAAK,CAACwB,IAAN,CAAW,WAAX,EAAwB;AACpBW,UAAAA,IAAI,EAAEhB,IAAI,CAACgB,IADS;AAEpBC,UAAAA,KAAK,EAAEjB,IAAI,CAACiB,KAFQ;AAGpBC,UAAAA,QAAQ,EAAElB,IAAI,CAACkB;AAHK,SAAxB,EAKKZ,IALL,CAKU,UAAAC,QAAQ,EAAI;AACd,cAAItB,MAAM,GAAG,OAAb;AACAgB,UAAAA,MAAM,CAAC,iBAAD,EAAoBhB,MAApB,CAAN;AACAkB,UAAAA,OAAO,CAACI,QAAD,CAAP;AACH,SATL,EAUKK,KAVL,CAUW,UAAAC,KAAK,EAAI;AACZ,cAAI5B,MAAM,GAAG,OAAb;AACAgB,UAAAA,MAAM,CAAC,iBAAD,EAAoBhB,MAApB,CAAN;AACAG,UAAAA,YAAY,CAAC0B,UAAb,CAAwB,OAAxB;AACAV,UAAAA,MAAM,CAACS,KAAD,CAAN;AACH,SAfL;AAgBH,OAjBM,CAAP;AAkBH;AAvCI,GAjCO;AA2EhBM,EAAAA,OAAO,EAAE;AACLC,IAAAA,eAAe,EAAE,yBAAApC,KAAK;AAAA,aAAI,CAAC,CAACA,KAAK,CAACG,KAAZ;AAAA,KADjB;AAELkC,IAAAA,UAAU,EAAE,oBAAArC,KAAK;AAAA,aAAIA,KAAK,CAACC,MAAV;AAAA;AAFZ;AA3EO,CAAb","sourcesContent":["import axios from 'axios'\nexport const auth = {\n    namespaced: true,\n    state: {\n        status: '',\n        register_status: '',\n        token: localStorage.getItem('token') || '',\n        user: {}\n    },\n\n    mutations: {\n        saveToken(state, token) {\n            state.token = token\n        },\n        auth_request(state) {\n            state.status = 'loading'\n        },\n        auth_success(state, token, user) {\n            state.status = 'success'\n            state.token = token\n            state.user = user\n        },\n        register_status(state, value) {\n            state.register_status = value\n        },\n        auth_error(state) {\n            state.status = 'error'\n        },\n        logout(state) {\n            state.status = ''\n            state.token = ''\n        },\n    },\n\n    actions: {\n        login({ commit }, data) {\n\n            return new Promise((resolve, reject) => {\n                axios.post('/login', data)\n                    .then(response => {\n                        const token = response.data.token\n                        const user = response.data.user\n                        localStorage.setItem('token', token)\n                        axios.defaults.headers.common['Authorization'] = token\n                        commit('auth_success', token, user)\n                        resolve(response)\n                    })\n                    .catch(error => {\n                        commit('auth_error')\n                        localStorage.removeItem('token')\n                        reject(error)\n                    })\n            })\n        },\n        register({commit}, data) {\n            return new Promise((resolve, reject) => {\n                axios.post('/register', {\n                    name: data.name,\n                    email: data.email,\n                    password: data.password,\n                })\n                    .then(response => {\n                        let status = 'error'\n                        commit('register_status', status)\n                        resolve(response)\n                    })\n                    .catch(error => {\n                        let status = 'error'\n                        commit('register_status', status)\n                        localStorage.removeItem('token')\n                        reject(error)\n                    })\n            })\n        },\n\n    },\n    getters: {\n        isAuthenticated: state => !!state.token,\n        authStatus: state => state.status,\n    },\n\n};"]}]}